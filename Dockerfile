# 1. ベースとなるNode.jsの公式イメージを選択
# Alpine Linuxベースのイメージは軽量なため推奨されます
FROM node:20-alpine

# 2. コンテナ内の作業ディレクトリを作成・指定
WORKDIR /app

# 3. 依存関係のファイルを先にコピー
# これにより、ソースコードの変更だけでは再インストールが走らなくなり、ビルドが高速化します
COPY package*.json ./

# 4. 依存ライブラリをインストール
RUN npm install

# 5. プロジェクトのソースコードを全てコピー
COPY . .

# 6. コンテナ起動時に実行するコマンドを指定
CMD ["npm", "start"]